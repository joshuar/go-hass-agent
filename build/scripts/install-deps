#!/usr/bin/env bash

# Copyright (c) 2024 Joshua Rich <joshua.rich@gmail.com>
#
# This software is released under the MIT License.
# https://opensource.org/licenses/MIT

set -e

case $1 in
    amd64)
        pkgarch=(amd64)
        ccpkg=(gcc)
        ;;
    arm)
        pkgarch=(armhf)
        ccpkg=(gcc gcc-arm-linux-gnueabihf)
        ;;
    arm64)
        pkgarch=(arm64)
        ccpkg=(gcc gcc-aarch64-linux-gnu)
        ;;
    all)
        pkgarch=(amd64 armhf arm64)
        ccpkg=(gcc gcc-arm-linux-gnueabihf gcc-aarch64-linux-gnu)
        ;;
    *)
        echo "No arch specified"
        exit -1
        ;;
esac

DEBIAN_FRONTEND=noninteractive

apt-get update
apt-get -y install desktop-file-utils ${ccpkg[@]:0}
for arch in "${pkgarch[@]}"; do 
   apt-get -y install \
        libgl1-mesa-dev:${arch} xserver-xorg-dev:${arch} \
        libxcursor-dev:${arch} libxrandr-dev:${arch} \
        libxinerama-dev:${arch} libxi-dev:${arch} \
        libgl1-mesa-dev:${arch} libxxf86vm-dev:${arch}
done
