#!/usr/bin/env bash

# Copyright (c) 2024 Joshua Rich <joshua.rich@gmail.com>
#
# This software is released under the MIT License.
# https://opensource.org/licenses/MIT

set -e

# set arch as appropriate
case $1 in
    linux/amd64) arch=(amd64) ;;
    linux/arm/*) arch=(armhf) ;;
    linux/arm64) arch=(arm64) ;;
    all) arch=(armhf arm64 amd64) ;;
    *) echo "No arch specified" && exit -1 ;;
esac

export DEBIAN_FRONTEND=noninteractive

apt-get update
for arch in "$@"; do
        apt-get -y install \
                libgl1:${arch} libx11-6:${arch} libglx0:${arch} \
                libglvnd0:${arch} libxcb1:${arch} libxau6:${arch} \
                libxdmcp6:${arch} dbus-x11:${arch}
done
rm -rf /var/lib/apt/lists/* /var/cache/apt/*
